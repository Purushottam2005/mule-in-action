<mule xmlns="http://www.mulesource.org/schema/mule/core/2.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:spring="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:file="http://www.mulesource.org/schema/mule/file/2.0"
       xmlns:imap="http://www.mulesource.org/schema/mule/imap/2.0"
       xmlns:jdbc="http://www.mulesource.org/schema/mule/jdbc/2.0"
       xmlns:email="http://www.mulesource.org/schema/mule/email/2.0"
       xmlns:xm="http://www.mulesource.org/schema/mule/xml/2.0"
       xmlns:stdio="http://www.mulesource.org/schema/mule/stdio/2.0"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
       http://www.mulesource.org/schema/mule/core/2.0 http://www.mulesource.org/schema/mule/core/2.0/mule.xsd
       http://www.mulesource.org/schema/mule/file/2.0 http://www.mulesource.org/schema/mule/file/2.0/mule-file.xsd
       http://www.mulesource.org/schema/mule/imap/2.0 http://www.mulesource.org/schema/mule/imap/2.0/mule-imap.xsd
       http://www.mulesource.org/schema/mule/jdbc/2.0 http://www.mulesource.org/schema/mule/jdbc/2.0/mule-jdbc.xsd
       http://www.mulesource.org/schema/mule/email/2.0 http://www.mulesource.org/schema/mule/email/2.0/mule-email.xsd
       http://www.mulesource.org/schema/mule/xml/2.0 http://www.mulesource.org/schema/mule/xml/2.0/mule-xml.xsd
       http://www.mulesource.org/schema/mule/stdio/2.0 http://www.mulesource.org/schema/mule/stdio/2.0/mule-stdio.xsd"  
>
    

        <spring:beans>
            <spring:import resource="spring-config.xml"/>
        </spring:beans>

        <jdbc:connector name="jdbcConnector" dataSource-ref="dataSource"> 
            <jdbc:query key="statsInsert" value="insert into statistics values (0,${payload})"/>
        </jdbc:connector>
         
        <model name="Listing 3.1">
            <service name="Data Statistics Service"> 
                <inbound> 
                    <imap:inbound-endpoint host="localhost" user='user%40mail.com' password="password"> 
                        <email:email-to-string-transformer/>
                    </imap:inbound-endpoint>
                </inbound>
                <component class="com.muleinaction.DataStatisticsComponent"/>
                <outbound> 
                    <outbound-pass-through-router> 
                        <jdbc:outbound-endpoint queryKey="statsInsert"/>
                    </outbound-pass-through-router>
                     
                </outbound>
            </service>
        </model>
         
    </mule>
     
    
